<ion-content padding>

  <div class="icons">
    <ion-icon *ngIf="!editing;else editingIcons" name="create" (click)="edit()"></ion-icon>
    <ng-template #editingIcons>
      <ion-icon name="close-circle" (click)="cancel()"></ion-icon>
      <ion-icon name="checkmark-circle" (click)="save()"></ion-icon>
    </ng-template>
  </div>

  <ion-grid>

    <ion-row>
      <ion-col text-center id="Profile">
        Profile
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-auto>
        <img *ngIf="buyerUser?.image as imageUrl; else missingPhotoTemplate" id="profile-img" [src]="imageUrl" alt="Missing Photo">
        <ng-template #missingPhotoTemplate>
          <img id="profile-img" src="assets/images/missing_photo.png" alt="Missing Photo">
        </ng-template>
      </ion-col>
      <ion-col>
        <p>{{user?.name}}</p>
        <p>{{user?.phone}}</p>
        <p>{{user?.address}}</p>
      </ion-col>
    </ion-row>

    <div *ngIf="editing;else ratings" class="edit">
      <ion-row align-items-center>
        <ion-col col-auto>Address:</ion-col>
        <ion-col>
          <ion-item>
            <ion-input type="text" placeholder="Address" class="form-control" [(ngModel)]="user.address" name="address" required></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row align-items-center>
        <ion-col col-auto>Phone #:</ion-col>
        <ion-col>
          <ion-item>
            <ion-input id="phone" type="tel" placeholder="(555) 555-5555" class="form-control" [(ngModel)]="user.phone" name="phone"
              required></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row align-items-center>
        <ion-col col-auto>Profile Image:</ion-col>
        <ion-col>
          <button ion-button type="button" (click)="pickImage()">Choose</button>
        </ion-col>
        <ion-col>
          <img *ngIf="this.imageUrl" src="" alt="profile image">
        </ion-col>
      </ion-row>
    </div>

    <ng-template #ratings>
      <ion-row align-items-center style="margin-top: 20px;">
        <ion-col>
          <h3 style="text-decoration: underline">Buying</h3>
        </ion-col>
      </ion-row>
      <ion-row align-items-center>
        <ion-col>
          <rating [(ngModel)]="user && user.buyerRating" [float]="true" [readonly]="true">
          </rating>
        </ion-col>
        <ion-col col-auto>
          {{user?.buyerRating | number : '1.1-1'}} ({{user?.buyerTotal}} ratings)
        </ion-col>
      </ion-row>
      <ion-row align-items-center>
        <ion-col>
          <h3 style="text-decoration: underline">Shopping</h3>
        </ion-col>
      </ion-row>
      <ion-row align-items-center>
        <ion-col>
          <rating [(ngModel)]="user && user.shopperRating" [float]="true" [readonly]="true">
          </rating>
        </ion-col>
        <ion-col col-auto>
          {{user?.shopperRating | number : '1.1-1'}} ({{user?.shopperTotal}} ratings)
        </ion-col>
      </ion-row>
    </ng-template>
  </ion-grid>
</ion-content>
